<!doctype html>
<html lang="en">

<head>
  


<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="One of the benefits of buildpacks is they can also populate the app image with metadata from the build process, allowing you to audit the app image for information like:
The process types that are…"/>
<link rel="canonical" content="https://buildpacks.io/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials/">
<link rel="icon" type="image/png" href="/images/favicon.png">






<meta property="og:title" content="Adding Bill-of-Materials · Cloud Native Buildpacks">
<meta property="og:type" content="website">
<meta property="og:url" content="https://buildpacks.io/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials/">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Cloud Native Buildpacks">
<meta property="og:description" content="One of the benefits of buildpacks is they can also populate the app image with metadata from the build process, allowing you to audit the app image for information like:
The process types that are…">
<meta property="og:type" content="article">
<meta property="og:image" content="https://buildpacks.io/images/buildpacks-social-card.jpg">
<meta property="og:image:alt" content="Buildpacks project logo">
<meta property="og:image:type" content="image/jpeg">






<meta property="twitter:title" content="Adding Bill-of-Materials · Cloud Native Buildpacks">
<meta property="twitter:card" content="summary">
<meta property="twitter:image" content="https://buildpacks.io/images/buildpacks-social-card-square.jpg">
<meta property="twitter:image:alt" content="Buildpacks project logo">
<meta property="twitter:site" content="@buildpacks_io">
<meta property="twitter:creator" content="@buildpacks_io">

  <script
    src="https://cdn.jsdelivr.net/combine/npm/axios@0.21.0,npm/jquery@3.5.1,npm/bootstrap@4.5.3,npm/fullcalendar@5.4.0,npm/jquery-replacetext@1.1.0/replacetext.min.js"></script>


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css"
    crossorigin="anonymous">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/combine/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css,npm/fullcalendar@5.4.0/main.min.css"
    crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono|Source+Sans+Pro:400,400i,600" rel="stylesheet">
  
  <link rel="stylesheet" href="https://buildpacks.io/scss/site.css" integrity="" media="screen">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CJLSR4FQXL"></script>
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/asciinema-player/2.6.1/asciinema-player.min.css"
    integrity="sha512-tv24MiwP+0CRCL80VsmJYPl/xDD2tdlDMz9fhNCIAQ6UPrj6Kh/57hOt9A4YnoNDKH5QDxJqGhtt9NPW2sgQeg=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer">
  <style type="text/css">
    .asciinema-theme-asciinema .fg-15 {
        color: #6a2929;
    }
    .asciinema-theme-asciinema .asciinema-terminal {
        color: #888888;
    }
  </style>

  <script>
    $(function () {
      $('h1[id], h2[id], h3[id], h4[id], h5[id]').not(':has(a)').each(function () {
        this.innerHTML =
          `<a href="#${this.id}" class="h-anchor">
            ${this.innerHTML} <i class="fas fa-link icon" aria-label="Anchor"></i>
          </a>`;
      });

      if ($('input#search').length > 0) {
        docsearch({
          apiKey: '5c00a51f166dab99e1cc6e0a9976e9f9',
          indexName: 'buildpacks',
          inputSelector: 'input#search',
          debug: false
        });
      }
    });

    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-CJLSR4FQXL');
  </script>

  <title>Adding Bill-of-Materials · Cloud Native Buildpacks</title>
</head>

<body>
  <header class="container px-0">
  <nav class="navbar navbar-expand-lg navbar-light">
    <a href="https://buildpacks.io/" class="logo navbar-brand"><img src="/images/buildpacks-logo.svg"
        alt="Buildpacks Logo"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
      <ul class="navbar-nav">
        
        
        
        <li class="nav-item mr-lg-4 text-center text-lg-left ">
          <a class="nav-link py-2 py-lg-0 px-1"  href="/features">
            Features
          </a>
        </li>
        
        
        <li class="nav-item mr-lg-4 text-center text-lg-left ">
          <a class="nav-link py-2 py-lg-0 px-1"  href="/community">
            Community
          </a>
        </li>
        
        
        <li class="nav-item mr-lg-4 text-center text-lg-left ">
          <a class="nav-link py-2 py-lg-0 px-1" target='_blank'  href="https://medium.com/buildpacks">
            Blog
          </a>
        </li>
        
        
        <li class="nav-item mr-lg-4 text-center text-lg-left ">
          <a class="nav-link py-2 py-lg-0 px-1" target='_blank'  href="https://registry.buildpacks.io/">
            Registry
          </a>
        </li>
        
        <li class="nav-item text-center d-lg-none">
          <a class="nav-link py-2 px-1" href="/docs">Docs</a>
        </li>
        <li class="nav-item text-center d-lg-none">
          <a class="nav-link py-2 px-1" target='_blank' rel="noopener noreferrer" href="https://github.com/buildpacks">GitHub</a>
        </li>
      </ul>

      <a class="button-light mr-3 d-none d-lg-block" href="/docs"><i class="far fa-file-alt mr-2"></i>Docs</a>
      <a class="github-button icon-button bg-blue button d-none d-lg-flex" href="https://github.com/buildpacks">GitHub</a>
    </div>
  </nav>
</header>

  

<div class='docs'>
  <div class="container">
    <div class='row'>
      <div class='col-md-3 docs-sidebar'>
        <nav class='sidebar'>
  <form class="pt-1 pb-3 pl-2 pr-3 border-bottom">
    <input id="search" class="form-control" type="search" placeholder="Search..." aria-label="Search">
  </form>
  <ul>
    <li data-nav-id="/docs/" class="dd-item depth-0">
      <a href="/docs/">Getting Started</a>
      <ul class="ml-2">
        
<li data-nav-id="/docs/app-journey/" class="dd-item depth-1 collapse">
  <a href="/docs/app-journey/">An App&rsquo;s Brief Journey from Source to Image</a>
</li>
      </ul>
    </li>
<li data-nav-id="/docs/concepts/" class="dd-item depth-0 haschildren">
  <a href="/docs/concepts/">Concepts</a>
  <ul class="ml-2">
<li data-nav-id="/docs/concepts/components/" class="dd-item depth-1 collapse haschildren">
  <a href="/docs/concepts/components/">Components</a>
  <ul class="ml-2">
<li data-nav-id="/docs/concepts/components/builder/" class="dd-item depth-2">
  <a href="/docs/concepts/components/builder/">Builder</a>
</li>
<li data-nav-id="/docs/concepts/components/buildpack/" class="dd-item depth-2">
  <a href="/docs/concepts/components/buildpack/">Buildpack</a>
</li>
<li data-nav-id="/docs/concepts/components/buildpack-group/" class="dd-item depth-2">
  <a href="/docs/concepts/components/buildpack-group/">Buildpack Group</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/" class="dd-item depth-2 haschildren">
  <a href="/docs/concepts/components/lifecycle/">Lifecycle</a>
  <ul class="ml-2">
<li data-nav-id="/docs/concepts/components/lifecycle/analyze/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/analyze/">Analyze</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/detect/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/detect/">Detect</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/restore/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/restore/">Restore</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/build/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/build/">Build</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/export/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/export/">Export</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/create/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/create/">Create</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/launch/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/launch/">Launch</a>
</li>
<li data-nav-id="/docs/concepts/components/lifecycle/rebase/" class="dd-item depth-3 collapse">
  <a href="/docs/concepts/components/lifecycle/rebase/">Rebase</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/concepts/components/platform/" class="dd-item depth-2">
  <a href="/docs/concepts/components/platform/">Platform</a>
</li>
<li data-nav-id="/docs/concepts/components/stack/" class="dd-item depth-2">
  <a href="/docs/concepts/components/stack/">Stack</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/concepts/operations/" class="dd-item depth-1 collapse haschildren">
  <a href="/docs/concepts/operations/">Operations</a>
  <ul class="ml-2">
<li data-nav-id="/docs/concepts/operations/build/" class="dd-item depth-2">
  <a href="/docs/concepts/operations/build/">Build</a>
</li>
<li data-nav-id="/docs/concepts/operations/rebase/" class="dd-item depth-2">
  <a href="/docs/concepts/operations/rebase/">Rebase</a>
</li>
  </ul>
</li>
  </ul>
</li>
<li data-nav-id="/docs/features/" class="dd-item depth-0 haschildren">
  <a href="/docs/features/">Features</a>
  <ul class="ml-2">
<li data-nav-id="/docs/features/dockerfiles/" class="dd-item depth-1 collapse">
  <a href="/docs/features/dockerfiles/">Dockerfiles</a>
</li>
<li data-nav-id="/docs/features/reproducibility/" class="dd-item depth-1 collapse">
  <a href="/docs/features/reproducibility/">Reproducibility</a>
</li>
<li data-nav-id="/docs/features/bill-of-materials/" class="dd-item depth-1 collapse">
  <a href="/docs/features/bill-of-materials/">Software Bill of Materials</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/app-developer-guide/" class="dd-item depth-0 haschildren">
  <a href="/docs/app-developer-guide/">App Developer Guide</a>
  <ul class="ml-2">
<li data-nav-id="/docs/app-developer-guide/build-an-app/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/build-an-app/">Build an app</a>
</li>
<li data-nav-id="/docs/app-developer-guide/build-a-windows-app/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/build-a-windows-app/">Build a Windows app</a>
</li>
<li data-nav-id="/docs/app-developer-guide/build-an-arm-app/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/build-an-arm-app/">Build an ARM app</a>
</li>
<li data-nav-id="/docs/app-developer-guide/environment-variables/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/environment-variables/">Environment variables</a>
</li>
<li data-nav-id="/docs/app-developer-guide/using-cache-image/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/using-cache-image/">Cache Images</a>
</li>
<li data-nav-id="/docs/app-developer-guide/mounting-volumes/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/mounting-volumes/">Mounting Volumes</a>
</li>
<li data-nav-id="/docs/app-developer-guide/specify-buildpacks/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/specify-buildpacks/">Specify buildpacks</a>
</li>
<li data-nav-id="/docs/app-developer-guide/run-an-app/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/run-an-app/">Specify launch process</a>
</li>
<li data-nav-id="/docs/app-developer-guide/using-project-descriptor/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/using-project-descriptor/">Using project.toml</a>
</li>
<li data-nav-id="/docs/app-developer-guide/using-inline-buildpacks/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/using-inline-buildpacks/">Using Inline Buildpacks</a>
</li>
<li data-nav-id="/docs/app-developer-guide/using-http-proxy/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/using-http-proxy/">Using Buildpacks with a Proxy</a>
</li>
<li data-nav-id="/docs/app-developer-guide/building-on-podman/" class="dd-item depth-1">
  <a href="/docs/app-developer-guide/building-on-podman/">Building on Podman</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/buildpack-author-guide/" class="dd-item depth-0 parent haschildren">
  <a href="/docs/buildpack-author-guide/">Buildpack Author Guide</a>
  <ul class="ml-2">
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/" class="dd-item depth-1 parent haschildren">
  <a href="/docs/buildpack-author-guide/create-buildpack/">Create a buildpack</a>
  <ul class="ml-2">
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/setup-local-environment/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/setup-local-environment/">Set up your local environment</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/building-blocks-cnb/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/building-blocks-cnb/">Building blocks of a Cloud Native Buildpack</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/detection/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/detection/">Detecting your application</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/build-app/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/build-app/">Building your application</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/make-app-runnable/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/make-app-runnable/">Make your application runnable</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/specify-multiple-process-types/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/specify-multiple-process-types/">Specify multiple process types</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/caching/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/caching/">Improving performance with caching</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/make-buildpack-configurable/" class="dd-item depth-2">
  <a href="/docs/buildpack-author-guide/create-buildpack/make-buildpack-configurable/">Making your buildpack configurable</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials/" class="dd-item depth-2 active">
  <a href="/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials/">Adding Bill-of-Materials</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/buildpack-author-guide/package-a-buildpack/" class="dd-item depth-1">
  <a href="/docs/buildpack-author-guide/package-a-buildpack/">Package a buildpack</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/publish-a-buildpack/" class="dd-item depth-1">
  <a href="/docs/buildpack-author-guide/publish-a-buildpack/">Publish a buildpack</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/publishing-with-github-actions/" class="dd-item depth-1">
  <a href="/docs/buildpack-author-guide/publishing-with-github-actions/">Publishing with Github Actions</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/caching-strategies/" class="dd-item depth-1">
  <a href="/docs/buildpack-author-guide/caching-strategies/">Layer Types</a>
</li>
<li data-nav-id="/docs/buildpack-author-guide/build-phases-overview/" class="dd-item depth-1">
  <a href="/docs/buildpack-author-guide/build-phases-overview/">Overview of Buildpacks Phases</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/extension-author-guide/" class="dd-item depth-0 haschildren">
  <a href="/docs/extension-author-guide/">Extension Author Guide</a>
  <ul class="ml-2">
<li data-nav-id="/docs/extension-author-guide/create-extension/" class="dd-item depth-1 haschildren">
  <a href="/docs/extension-author-guide/create-extension/">Create an extension</a>
  <ul class="ml-2">
<li data-nav-id="/docs/extension-author-guide/create-extension/setup-local-environment/" class="dd-item depth-2 collapse">
  <a href="/docs/extension-author-guide/create-extension/setup-local-environment/">Set up your local environment</a>
</li>
<li data-nav-id="/docs/extension-author-guide/create-extension/why-dockerfiles/" class="dd-item depth-2 collapse">
  <a href="/docs/extension-author-guide/create-extension/why-dockerfiles/">Why Dockerfiles</a>
</li>
<li data-nav-id="/docs/extension-author-guide/create-extension/building-blocks-extension/" class="dd-item depth-2 collapse">
  <a href="/docs/extension-author-guide/create-extension/building-blocks-extension/">Building blocks of a CNB Image Extension</a>
</li>
<li data-nav-id="/docs/extension-author-guide/create-extension/build-dockerfile/" class="dd-item depth-2 collapse">
  <a href="/docs/extension-author-guide/create-extension/build-dockerfile/">Generating a build.Dockerfile</a>
</li>
<li data-nav-id="/docs/extension-author-guide/create-extension/run-dockerfile/" class="dd-item depth-2 collapse">
  <a href="/docs/extension-author-guide/create-extension/run-dockerfile/">Generating a run.Dockerfile</a>
</li>
  </ul>
</li>
  </ul>
</li>
<li data-nav-id="/docs/operator-guide/" class="dd-item depth-0 haschildren">
  <a href="/docs/operator-guide/">Operator Guide</a>
  <ul class="ml-2">
<li data-nav-id="/docs/operator-guide/create-a-builder/" class="dd-item depth-1">
  <a href="/docs/operator-guide/create-a-builder/">Create a builder</a>
</li>
<li data-nav-id="/docs/operator-guide/create-a-stack/" class="dd-item depth-1">
  <a href="/docs/operator-guide/create-a-stack/">Create a stack</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/platform-guide/" class="dd-item depth-0 haschildren">
  <a href="/docs/platform-guide/">Platform Guide</a>
  <ul class="ml-2">
<li data-nav-id="/docs/platform-guide/conventions/" class="dd-item depth-1 haschildren">
  <a href="/docs/platform-guide/conventions/">Conventions</a>
  <ul class="ml-2">
<li data-nav-id="/docs/platform-guide/conventions/source-metadata/" class="dd-item depth-2 collapse">
  <a href="/docs/platform-guide/conventions/source-metadata/">Source Metadata</a>
</li>
  </ul>
</li>
  </ul>
</li>
<li data-nav-id="/docs/tools/" class="dd-item depth-0 haschildren">
  <a href="/docs/tools/">Tools</a>
  <ul class="ml-2">
<li data-nav-id="/docs/tools/pack/" class="dd-item depth-1 haschildren">
  <a href="/docs/tools/pack/">Pack</a>
  <ul class="ml-2">
<li data-nav-id="/docs/tools/pack/concepts/" class="dd-item depth-2 collapse haschildren">
  <a href="/docs/tools/pack/concepts/">Concepts</a>
  <ul class="ml-2">
<li data-nav-id="/docs/tools/pack/concepts/trusted_builders/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/concepts/trusted_builders/">Trusted Builders</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/tools/pack/cli/" class="dd-item depth-2 collapse haschildren">
  <a href="/docs/tools/pack/cli/">CLI Docs</a>
  <ul class="ml-2">
<li data-nav-id="/docs/tools/pack/cli/pack/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack/">pack</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_build/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_build/">pack build</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_builder/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_builder/">pack builder</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_builder_create/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_builder_create/">pack builder create</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_builder_inspect/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_builder_inspect/">pack builder inspect</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_builder_suggest/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_builder_suggest/">pack builder suggest</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack/">pack buildpack</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_inspect/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_inspect/">pack buildpack inspect</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_new/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_new/">pack buildpack new</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_package/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_package/">pack buildpack package</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_pull/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_pull/">pack buildpack pull</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_register/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_register/">pack buildpack register</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_buildpack_yank/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_buildpack_yank/">pack buildpack yank</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_completion/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_completion/">pack completion</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config/">pack config</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_default-builder/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_default-builder/">pack config default-builder</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_experimental/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_experimental/">pack config experimental</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_lifecycle-image/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_lifecycle-image/">pack config lifecycle-image</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_pull-policy/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_pull-policy/">pack config pull-policy</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registries/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registries/">pack config registries</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registries_add/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registries_add/">pack config registries add</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registries_default/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registries_default/">pack config registries default</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registries_list/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registries_list/">pack config registries list</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registries_remove/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registries_remove/">pack config registries remove</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registry-mirrors/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registry-mirrors/">pack config registry-mirrors</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registry-mirrors_add/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registry-mirrors_add/">pack config registry-mirrors add</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registry-mirrors_list/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registry-mirrors_list/">pack config registry-mirrors list</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_registry-mirrors_remove/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_registry-mirrors_remove/">pack config registry-mirrors remove</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_run-image-mirrors/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_run-image-mirrors/">pack config run-image-mirrors</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_run-image-mirrors_add/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_run-image-mirrors_add/">pack config run-image-mirrors add</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_run-image-mirrors_list/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_run-image-mirrors_list/">pack config run-image-mirrors list</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_run-image-mirrors_remove/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_run-image-mirrors_remove/">pack config run-image-mirrors remove</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_trusted-builders/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_trusted-builders/">pack config trusted-builders</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_trusted-builders_add/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_trusted-builders_add/">pack config trusted-builders add</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_trusted-builders_list/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_trusted-builders_list/">pack config trusted-builders list</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_config_trusted-builders_remove/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_config_trusted-builders_remove/">pack config trusted-builders remove</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension/">pack extension</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_inspect/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_inspect/">pack extension inspect</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_new/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_new/">pack extension new</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_package/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_package/">pack extension package</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_pull/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_pull/">pack extension pull</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_register/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_register/">pack extension register</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_extension_yank/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_extension_yank/">pack extension yank</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_inspect/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_inspect/">pack inspect</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_rebase/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_rebase/">pack rebase</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_report/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_report/">pack report</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_sbom/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_sbom/">pack sbom</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_sbom_download/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_sbom_download/">pack sbom download</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_stack/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_stack/">pack stack</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_stack_suggest/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_stack_suggest/">pack stack suggest</a>
</li>
<li data-nav-id="/docs/tools/pack/cli/pack_version/" class="dd-item depth-3 collapse">
  <a href="/docs/tools/pack/cli/pack_version/">pack version</a>
</li>
  </ul>
</li>
  </ul>
</li>
<li data-nav-id="/docs/tools/circleci/" class="dd-item depth-1">
  <a href="/docs/tools/circleci/">CircleCI</a>
</li>
<li data-nav-id="/docs/tools/gitlab/" class="dd-item depth-1">
  <a href="/docs/tools/gitlab/">Gitlab Auto DevOps</a>
</li>
<li data-nav-id="/docs/tools/kpack/" class="dd-item depth-1">
  <a href="/docs/tools/kpack/">kpack</a>
</li>
<li data-nav-id="/docs/tools/piper/" class="dd-item depth-1">
  <a href="/docs/tools/piper/">Project &ldquo;Piper&rdquo;</a>
</li>
<li data-nav-id="/docs/tools/tekton/" class="dd-item depth-1">
  <a href="/docs/tools/tekton/">Tekton</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/reference/" class="dd-item depth-0 haschildren">
  <a href="/docs/reference/">Reference</a>
  <ul class="ml-2">
<li data-nav-id="/docs/reference/config/" class="dd-item depth-1 collapse haschildren">
  <a href="/docs/reference/config/">Configuration</a>
  <ul class="ml-2">
<li data-nav-id="/docs/reference/config/builder-config/" class="dd-item depth-2 collapse">
  <a href="/docs/reference/config/builder-config/">builder.toml</a>
</li>
<li data-nav-id="/docs/reference/config/package-config/" class="dd-item depth-2 collapse">
  <a href="/docs/reference/config/package-config/">package.toml</a>
</li>
<li data-nav-id="/docs/reference/config/project-descriptor/" class="dd-item depth-2 collapse">
  <a href="/docs/reference/config/project-descriptor/">project.toml</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/reference/spec/" class="dd-item depth-1 collapse haschildren">
  <a href="/docs/reference/spec/">Specification</a>
  <ul class="ml-2">
<li data-nav-id="/docs/reference/spec/buildpack-api/" class="dd-item depth-2">
  <a href="/docs/reference/spec/buildpack-api/">Buildpack API</a>
</li>
<li data-nav-id="/docs/reference/spec/distribution-api/" class="dd-item depth-2">
  <a href="/docs/reference/spec/distribution-api/">Distribution API</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/" class="dd-item depth-2 haschildren">
  <a href="/docs/reference/spec/migration/">Migration</a>
  <ul class="ml-2">
<li data-nav-id="/docs/reference/spec/migration/buildpack-api-0.4-0.5/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/buildpack-api-0.4-0.5/">Buildpack API 0.4 -&gt; 0.5</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/buildpack-api-0.5-0.6/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/buildpack-api-0.5-0.6/">Buildpack API 0.5 -&gt; 0.6</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/buildpack-api-0.6-0.7/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/buildpack-api-0.6-0.7/">Buildpack API 0.6 -&gt; 0.7</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/buildpack-api-0.7-0.8/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/buildpack-api-0.7-0.8/">Buildpack API 0.7 -&gt; 0.8</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/buildpack-api-0.8-0.9/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/buildpack-api-0.8-0.9/">Buildpack API 0.8 -&gt; 0.9</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.3-0.4/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.3-0.4/">Platform API 0.3 -&gt; 0.4</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.4-0.5/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.4-0.5/">Platform API 0.4 -&gt; 0.5</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.5-0.6/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.5-0.6/">Platform API 0.5 -&gt; 0.6</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.6-0.7/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.6-0.7/">Platform API 0.6 -&gt; 0.7</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.7-0.8/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.7-0.8/">Platform API 0.7 -&gt; 0.8</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.8-0.9/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.8-0.9/">Platform API 0.8 -&gt; 0.9</a>
</li>
<li data-nav-id="/docs/reference/spec/migration/platform-api-0.9-0.10/" class="dd-item depth-3 collapse">
  <a href="/docs/reference/spec/migration/platform-api-0.9-0.10/">Platform API 0.9 -&gt; 0.10</a>
</li>
  </ul>
</li>
<li data-nav-id="/docs/reference/spec/platform-api/" class="dd-item depth-2">
  <a href="/docs/reference/spec/platform-api/">Platform API</a>
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
  
</nav>



      </div>
      <div class='col-md-9 docs-content'>
        <div class="support-links text-right">
  
    
    
    <a href="https://github.com/buildpacks/docs/issues/new?body=%2A%2AOn&#43;Page%3A%2A%2A&#43;%5BAdding&#43;Bill-of-Materials%5D%28https%3A%2F%2Fbuildpacks.io%2Fdocs%2Fbuildpack-author-guide%2Fcreate-buildpack%2Fadding-bill-of-materials%2F%29"
       class="button-light button-small icon-button blank bg-white inline-flex" target="_blank">Report Issue</a>

    
    
    <a href="https://github.com/buildpacks/docs/edit/main/content/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials.md?description=Signed-off-by%3A&#43;NAME&#43;%3CEMAIL_ADDRESS%3E%0A%0A%3E&#43;_By&#43;signing&#43;off&#43;you&#43;acknowledge&#43;adhering&#43;to&#43;the&#43;requirements&#43;listed&#43;here%3A&#43;https%3A%2F%2Fprobot.github.io%2Fapps%2Fdco%2F_"
       class="button-light button-small icon-button github-button bg-white inline-flex" target="_blank">Edit</a>
    
  
</div>


        <div class="heading">
          <h1 class="title">Adding Bill-of-Materials</h1>
        </div>

        <!-- test:suite=create-buildpack;weight=9 -->
<p>One of the benefits of buildpacks is they can also populate the app image with metadata from the build process, allowing you to audit the app image for information like:</p>
<ul>
<li>The process types that are available and the commands associated with them</li>
<li>The run-image the app image was based on</li>
<li>The buildpacks were used to create the app image</li>
<li>And more&hellip;!</li>
</ul>
<p>You can find some of this information using <code>pack</code> via its <code>inspect-image</code> command.  The bill-of-materials information will be available using <code>pack sbom download</code>.</p>
<!-- test:exec -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pack inspect-image test-ruby-app
</span></span></code></pre></div><!--+- "{{execute}}"+-->
<p>You should see the following:</p>
<!-- test:assert=contains -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Run Images:
</span></span><span class="line"><span class="cl">  cnbs/sample-stack-run:jammy
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Buildpacks:
</span></span><span class="line"><span class="cl">  ID                   VERSION        HOMEPAGE
</span></span><span class="line"><span class="cl">  examples/ruby        0.0.1          -
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Processes:
</span></span><span class="line"><span class="cl">  TYPE                 SHELL        COMMAND                           ARGS        WORK DIR
</span></span><span class="line"><span class="cl">  web (default)        bash         bundle exec ruby app.rb                       /workspace
</span></span><span class="line"><span class="cl">  worker               bash         bundle exec ruby worker.rb                    /workspace
</span></span></code></pre></div><p>Apart from the above standard metadata, buildpacks can also populate information about the dependencies they have provided in form of a <code>Bill-of-Materials</code>. Let&rsquo;s see how we can use this to populate information about the version of <code>ruby</code> that was installed in the output app image.</p>
<p>To add the <code>ruby</code> version to the output of <code>pack download sbom</code>, we will have to provide a <a href="https://en.wikipedia.org/wiki/Software_bill_of_materials">Software <code>Bill-of-Materials</code></a> (<code>SBOM</code>) containing this information. There are three &ldquo;standard&rdquo; ways to report SBOM data.  You&rsquo;ll need to choose to use one of <a href="https://cyclonedx.org/">CycloneDX</a>, <a href="https://spdx.dev/">SPDX</a> or <a href="https://github.com/anchore/syft">Syft</a> update the <code>ruby.sbom.&lt;ext&gt;</code> (where <code>&lt;ext&gt;</code> is the extension appropriate for your SBOM standard, one of <code>cdx.json</code>, <code>spdx.json</code> or <code>syft.json</code>) at the end of your <code>build</code> script.  Discussion of which SBOM format to choose is outside the scope of this tutorial, but we will note that the SBOM format you choose to use is likely to be the output format of any SBOM scanner (eg: <a href="https://github.com/anchore/syft"><code>syft cli</code></a>) you might choose to use.  In this example we will use the CycloneDX json format.</p>
<p>First, annotate the <code>buildpack.toml</code> to specify that it emits CycloneDX:</p>
<!-- test:file=ruby-buildpack/buildpack.toml -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="c"># Buildpack API version</span>
</span></span><span class="line"><span class="cl"><span class="nx">api</span> <span class="p">=</span> <span class="s2">&#34;0.8&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Buildpack ID and metadata</span>
</span></span><span class="line"><span class="cl"><span class="p">[</span><span class="nx">buildpack</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">id</span> <span class="p">=</span> <span class="s2">&#34;examples/ruby&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">version</span> <span class="p">=</span> <span class="s2">&#34;0.0.1&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sbom-formats</span> <span class="p">=</span> <span class="p">[</span> <span class="s2">&#34;application/vnd.cyclonedx+json&#34;</span> <span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Stacks that the buildpack will work with</span>
</span></span><span class="line"><span class="cl"><span class="p">[[</span><span class="nx">stacks</span><span class="p">]]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">id</span> <span class="p">=</span> <span class="s2">&#34;io.buildpacks.samples.stacks.jammy&#34;</span>
</span></span></code></pre></div><p>Then, in our buildpack implementation we will generate the necessary SBOM metadata:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Append a Bill-of-Materials containing metadata about the provided ruby version</span>
</span></span><span class="line"><span class="cl">cat &gt;&gt; <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/ruby.sbom.cdx.json&#34;</span> <span class="s">&lt;&lt; EOL
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;bomFormat&#34;: &#34;CycloneDX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;specVersion&#34;: &#34;1.4&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;version&#34;: 1,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;components&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s">    {
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;type&#34;: &#34;library&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;name&#34;: &#34;ruby&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;version&#34;: &#34;$ruby_version&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">    }
</span></span></span><span class="line"><span class="cl"><span class="s">  ]
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">EOL</span>
</span></span></code></pre></div><p>We can also add an SBOM entry for each dependency listed in <code>Gemfile.lock</code>.  Here we use <code>jq</code> to add a new record to the <code>components</code> array in <code>bundler.sbom.cdx.json</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">crubybom</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">layersdir</span><span class="si">}</span><span class="s2">/ruby.sbom.cdx.json&#34;</span>
</span></span><span class="line"><span class="cl">cat &gt;&gt; <span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span> <span class="s">&lt;&lt; EOL
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;bomFormat&#34;: &#34;CycloneDX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;specVersion&#34;: &#34;1.4&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;version&#34;: 1,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;components&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s">    {
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;type&#34;: &#34;library&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;name&#34;: &#34;ruby&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;version&#34;: &#34;$ruby_version&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">    }
</span></span></span><span class="line"><span class="cl"><span class="s">  ]
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">EOL</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> -f Gemfile.lock <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> gem in <span class="k">$(</span>gem dep -q <span class="p">|</span> grep ^Gem <span class="p">|</span> sed <span class="s1">&#39;s/^Gem //&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nv">version</span><span class="o">=</span><span class="si">${</span><span class="nv">gem</span><span class="p">##*-</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    <span class="nv">name</span><span class="o">=</span><span class="si">${</span><span class="nv">gem</span><span class="p">%-</span><span class="si">${</span><span class="nv">version</span><span class="si">}}</span>
</span></span><span class="line"><span class="cl">    <span class="nv">DEP</span><span class="o">=</span><span class="k">$(</span>jq --arg name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">&#34;</span> --arg version <span class="s2">&#34;</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      <span class="s1">&#39;.components[.components| length] |= . + {&#34;type&#34;: &#34;library&#34;, &#34;name&#34;: $name, &#34;version&#34;: $version}&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      <span class="s2">&#34;</span><span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="si">${</span><span class="nv">DEP</span><span class="si">}</span> &gt; <span class="s2">&#34;</span><span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>Your <code>ruby-buildpack/bin/build</code><!--+"{{open}}"+--> script should look like the following:</p>
<!-- test:file=ruby-buildpack/bin/build -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="nb">set</span> -eo pipefail
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;---&gt; Ruby Buildpack&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 1. GET ARGS</span>
</span></span><span class="line"><span class="cl"><span class="nv">layersdir</span><span class="o">=</span><span class="nv">$1</span>
</span></span><span class="line"><span class="cl"><span class="nv">plan</span><span class="o">=</span><span class="nv">$3</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. CREATE THE LAYER DIRECTORY</span>
</span></span><span class="line"><span class="cl"><span class="nv">rubylayer</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">&#34;</span>/ruby
</span></span><span class="line"><span class="cl">mkdir -p <span class="s2">&#34;</span><span class="nv">$rubylayer</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3. DOWNLOAD RUBY</span>
</span></span><span class="line"><span class="cl"><span class="nv">ruby_version</span><span class="o">=</span><span class="k">$(</span>cat <span class="s2">&#34;</span><span class="nv">$plan</span><span class="s2">&#34;</span> <span class="p">|</span> yj -t <span class="p">|</span> jq -r <span class="s1">&#39;.entries[] | select(.name == &#34;ruby&#34;) | .metadata.version&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;---&gt; Downloading and extracting Ruby </span><span class="nv">$ruby_version</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">ruby_url</span><span class="o">=</span>https://s3-external-1.amazonaws.com/heroku-buildpack-ruby/heroku-22/ruby-<span class="nv">$ruby_version</span>.tgz
</span></span><span class="line"><span class="cl">wget -q -O - <span class="s2">&#34;</span><span class="nv">$ruby_url</span><span class="s2">&#34;</span> <span class="p">|</span> tar -xzf - -C <span class="s2">&#34;</span><span class="nv">$rubylayer</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4. MAKE RUBY AVAILABLE DURING LAUNCH</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> -e <span class="s1">&#39;[types]\nlaunch = true&#39;</span> &gt; <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/ruby.toml&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 5. MAKE RUBY AVAILABLE TO THIS SCRIPT</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$rubylayer</span><span class="s2">&#34;</span>/bin:<span class="nv">$PATH</span>
</span></span><span class="line"><span class="cl"><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="p">:+</span><span class="si">${</span><span class="nv">LD_LIBRARY_PATH</span><span class="si">}</span><span class="p">:</span><span class="si">}</span><span class="s2">&#34;</span><span class="nv">$rubylayer</span><span class="s2">/lib&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 6. INSTALL GEMS</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Compares previous Gemfile.lock checksum to the current Gemfile.lock</span>
</span></span><span class="line"><span class="cl"><span class="nv">bundlerlayer</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/bundler&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">local_bundler_checksum</span><span class="o">=</span><span class="k">$((</span>sha256sum Gemfile.lock <span class="o">||</span> <span class="nb">echo</span> <span class="s1">&#39;DOES_NOT_EXIST&#39;</span><span class="o">)</span> <span class="o">|</span> cut <span class="o">-</span>d <span class="s1">&#39; &#39;</span> <span class="o">-</span>f <span class="m">1</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="nv">remote_bundler_checksum</span><span class="o">=</span><span class="k">$(</span>cat <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/bundler.toml&#34;</span> <span class="p">|</span> yj -t <span class="p">|</span> jq -r .metadata.checksum 2&gt;/dev/null <span class="o">||</span> <span class="nb">echo</span> <span class="s1">&#39;DOES_NOT_EXIST&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Always set the types table so that we re-use the appropriate layers</span>
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="o">-</span>e <span class="s1">&#39;[types]\ncache = true\nlaunch = true&#39;</span> &gt;&gt; <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/bundler.toml&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> <span class="o">-</span>f Gemfile.lock <span class="o">&amp;&amp;</span> <span class="nv">$local_bundler_checksum</span> <span class="o">==</span> <span class="nv">$remote_bundler_checksum</span> <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Determine if no gem dependencies have changed, so it can reuse existing gems without running bundle install</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Reusing gems&#34;</span>
</span></span><span class="line"><span class="cl">    bundle config <span class="o">--</span><span class="nb">local</span> path <span class="s2">&#34;</span><span class="nv">$bundlerlayer</span><span class="s2">&#34;</span> &gt;/dev/null
</span></span><span class="line"><span class="cl">    bundle config <span class="o">--</span><span class="nb">local</span> bin <span class="s2">&#34;</span><span class="nv">$bundlerlayer</span><span class="s2">/bin&#34;</span> &gt;/dev/null
</span></span><span class="line"><span class="cl"><span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># Determine if there has been a gem dependency change and install new gems to the bundler layer; re-using existing and un-changed gems</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="s2">&#34;---&gt; Installing gems&#34;</span>
</span></span><span class="line"><span class="cl">    mkdir <span class="o">-</span>p <span class="s2">&#34;</span><span class="nv">$bundlerlayer</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    cat &gt;&gt; <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/bundler.toml&#34;</span> <span class="s">&lt;&lt; EOL
</span></span></span><span class="line"><span class="cl"><span class="s">[metadata]
</span></span></span><span class="line"><span class="cl"><span class="s">checksum = &#34;$local_bundler_checksum&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOL</span>
</span></span><span class="line"><span class="cl">    bundle config <span class="nb">set</span> <span class="o">--</span><span class="nb">local</span> path <span class="s2">&#34;</span><span class="nv">$bundlerlayer</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> bundle install <span class="o">&amp;&amp;</span> bundle binstubs <span class="o">--</span>all <span class="o">--</span>path <span class="s2">&#34;</span><span class="nv">$bundlerlayer</span><span class="s2">/bin&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 7. SET DEFAULT START COMMAND</span>
</span></span><span class="line"><span class="cl">cat &gt; <span class="s2">&#34;</span><span class="nv">$layersdir</span><span class="s2">/launch.toml&#34;</span> <span class="s">&lt;&lt; EOL
</span></span></span><span class="line"><span class="cl"><span class="s"># our web process
</span></span></span><span class="line"><span class="cl"><span class="s">[[processes]]
</span></span></span><span class="line"><span class="cl"><span class="s">type = &#34;web&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">command = &#34;bundle exec ruby app.rb&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">default = true
</span></span></span><span class="line"><span class="cl"><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s"># our worker process
</span></span></span><span class="line"><span class="cl"><span class="s">[[processes]]
</span></span></span><span class="line"><span class="cl"><span class="s">type = &#34;worker&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">command = &#34;bundle exec ruby worker.rb&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">EOL</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ========== ADDED ===========</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 8. ADD A SBOM</span>
</span></span><span class="line"><span class="cl"><span class="nv">rubybom</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">layersdir</span><span class="si">}</span><span class="s2">/ruby.sbom.cdx.json&#34;</span>
</span></span><span class="line"><span class="cl">cat &gt;&gt; <span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span> <span class="s">&lt;&lt; EOL
</span></span></span><span class="line"><span class="cl"><span class="s">{
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;bomFormat&#34;: &#34;CycloneDX&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;specVersion&#34;: &#34;1.4&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;version&#34;: 1,
</span></span></span><span class="line"><span class="cl"><span class="s">  &#34;components&#34;: [
</span></span></span><span class="line"><span class="cl"><span class="s">    {
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;type&#34;: &#34;library&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;name&#34;: &#34;ruby&#34;,
</span></span></span><span class="line"><span class="cl"><span class="s">      &#34;version&#34;: &#34;$ruby_version&#34;
</span></span></span><span class="line"><span class="cl"><span class="s">    }
</span></span></span><span class="line"><span class="cl"><span class="s">  ]
</span></span></span><span class="line"><span class="cl"><span class="s">}
</span></span></span><span class="line"><span class="cl"><span class="s">EOL</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> <span class="o">-</span>f Gemfile.lock <span class="o">]]</span> <span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> gem in <span class="k">$(</span>gem dep -q <span class="p">|</span> grep ^Gem <span class="p">|</span> sed <span class="s1">&#39;s/^Gem //&#39;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nv">version</span><span class="o">=</span><span class="si">${</span><span class="nv">gem</span><span class="p">##*-</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">    <span class="nv">name</span><span class="o">=</span><span class="si">${</span><span class="nv">gem</span><span class="p">%-</span><span class="si">${</span><span class="nv">version</span><span class="si">}}</span>
</span></span><span class="line"><span class="cl">    <span class="nv">DEP</span><span class="o">=</span><span class="k">$(</span>jq --arg name <span class="s2">&#34;</span><span class="si">${</span><span class="nv">name</span><span class="si">}</span><span class="s2">&#34;</span> --arg version <span class="s2">&#34;</span><span class="si">${</span><span class="nv">version</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      <span class="s1">&#39;.components[.components| length] |= . + {&#34;type&#34;: &#34;library&#34;, &#34;name&#34;: $name, &#34;version&#34;: $version}&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>      <span class="s2">&#34;</span><span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span><span class="s2">&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">echo</span> <span class="si">${</span><span class="nv">DEP</span><span class="si">}</span> &gt; <span class="s2">&#34;</span><span class="si">${</span><span class="nv">rubybom</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">done</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><p>Then rebuild your app using the updated buildpack:</p>
<!-- test:exec -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pack build test-ruby-app --path ./ruby-sample-app --buildpack ./ruby-buildpack
</span></span></code></pre></div><!--+- "{{execute}}"+-->
<p>Viewing your bill-of-materials requires extracting (or <code>download</code>ing) the bill-of-materials from your local image.  This command can take some time to return.</p>
<!-- test:exec -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pack sbom download test-ruby-app
</span></span></code></pre></div><!--+- "{{execute}}"+-->
<p>The SBOM information is now downloaded to the local file system:</p>
<!-- test:exec -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cat layers/sbom/launch/examples_ruby/ruby/sbom.cdx.json <span class="p">|</span> jq -M
</span></span></code></pre></div><p>You should find that the included <code>ruby</code> version is <code>3.1.0</code> as expected.</p>
<!-- test:assert=contains;ignore-lines=... -->
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;bomFormat&#34;: &#34;CycloneDX&#34;,
</span></span><span class="line"><span class="cl">  &#34;specVersion&#34;: &#34;1.4&#34;,
</span></span><span class="line"><span class="cl">  &#34;version&#34;: 1,
</span></span><span class="line"><span class="cl">  &#34;components&#34;: [
</span></span><span class="line"><span class="cl">    {
</span></span><span class="line"><span class="cl">      &#34;type&#34;: &#34;library&#34;,
</span></span><span class="line"><span class="cl">      &#34;name&#34;: &#34;ruby&#34;,
</span></span><span class="line"><span class="cl">      &#34;version&#34;: &#34;3.1.0&#34;
</span></span><span class="line"><span class="cl">    },
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">  ]
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></div><p>Congratulations! You’ve created your first configurable Cloud Native Buildpack that uses detection, image layers, and caching to create an introspectable and runnable OCI image.</p>
<h2 id="going-further">Going further</h2>
<p>Now that you&rsquo;ve finished your buildpack, how about extending it? Try:</p>
<ul>
<li>Caching the downloaded Ruby version</li>
<li><a href="/docs/buildpack-author-guide/package-a-buildpack/">Packaging your buildpack for distribution</a></li>
</ul>


        

        <hr>
<div class='footline d-block'>
  <div class="support-links text-right">
  
    
    
    <a href="https://github.com/buildpacks/docs/issues/new?body=%2A%2AOn&#43;Page%3A%2A%2A&#43;%5BAdding&#43;Bill-of-Materials%5D%28https%3A%2F%2Fbuildpacks.io%2Fdocs%2Fbuildpack-author-guide%2Fcreate-buildpack%2Fadding-bill-of-materials%2F%29"
       class="button-light button-small icon-button blank bg-white inline-flex" target="_blank">Report Issue</a>

    
    
    <a href="https://github.com/buildpacks/docs/edit/main/content/docs/buildpack-author-guide/create-buildpack/adding-bill-of-materials.md?description=Signed-off-by%3A&#43;NAME&#43;%3CEMAIL_ADDRESS%3E%0A%0A%3E&#43;_By&#43;signing&#43;off&#43;you&#43;acknowledge&#43;adhering&#43;to&#43;the&#43;requirements&#43;listed&#43;here%3A&#43;https%3A%2F%2Fprobot.github.io%2Fapps%2Fdco%2F_"
       class="button-light button-small icon-button github-button bg-white inline-flex" target="_blank">Edit</a>
    
  
</div>

</div>

      </div>
    </div>
  </div>
</div>





  <footer>
  <div class="container footer">
    <a href="https://www.cncf.io/" style="width: 50%;"><img src="/images/cncf-color.svg" class="footer-logo" alt="CNCF logo" ></a>
    <p>We are a <a href="https://www.cncf.io/">Cloud Native Computing Foundation</a> incubating project.</p>
  </div>
  <div class="bg-blue">
    <div class="container sub-footer">
      <ul>
        
        <li><a target="_blank" rel="noopener noreferrer" href="https://buildpacks.devstats.cncf.io/d/8/dashboards?orgId=1&amp;refresh=15m">DevStats</a></li>
        
        <li><span>&bull;</span><a target="_blank" rel="noopener noreferrer" href="https://datastudio.google.com/reporting/4b23856c-6c24-44f5-86f2-333d0ad3f236">Analytics</a></li>
        
        <li><span>&bull;</span><a target="_blank" rel="noopener noreferrer" href="https://www.linuxfoundation.org/privacy/">Privacy Policy</a></li>
        
      </ul>

      <ul>
        
        <li><a target="_blank" rel="noopener noreferrer" href="https://lists.cncf.io/g/cncf-buildpacks/join">Mailing List</a></li>
        
        <li><span>&bull;</span><a target="_blank" rel="noopener noreferrer" href="https://slack.cncf.io">Slack</a></li>
        
        <li><span>&bull;</span><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/buildpacks_io">Twitter</a></li>
        
        <li><span>&bull;</span><a target="_blank" rel="noopener noreferrer" href="https://github.com/buildpacks">GitHub</a></li>
        
      </ul>
    </div>
    <div class="container sub-footer">
      <ul>
        <li><p>Copyright © 2022 The Linux Foundation ®. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our <a href="(https://www.linuxfoundation.org/trademark-usage">Trademark Usage page</a></p></li>
      </ul>
    </div>
  </div>
</footer>


    
  <script src="https://cdnjs.cloudflare.com/ajax/libs/asciinema-player/2.6.1/asciinema-player.min.js"></script>
</body>

</html>
